---
// By Pawan Kumar Sharma
import BaseLayout from "../layouts/BaseLayout.astro";
import Seo from "../components/Seo.astro";

// ðŸ”¹ Build-time fetch from Dev.to API
const username = "itspksharma";
const response = await fetch(`https://dev.to/api/articles?username=${username}`);
const blogs = await response.json();
---

<BaseLayout title="Blog | Pawan Sharma" description="Read tech blogs and insights by Pawan Sharma on web development, tools, and software trends.">
  <Seo title="Blog | Pawan Sharma" description="Read tech blogs and insights by Pawan Sharma on web development, tools, and software trends." />

  <section class="max-w-4xl mx-auto px-4 py-16 text-gray-800 dark:text-gray-100">
    <h1 class="text-4xl font-bold mb-10 text-indigo-600 dark:text-indigo-400">Blog</h1>

    <div class="space-y-8">
      {blogs.map((post) => (
        <article class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow hover:shadow-lg transition">
          <img 
            src={post.cover_image || "/images/blogs/default.png"} 
            alt={post.title} 
            class="rounded mb-4 w-full h-48 object-cover" 
            loading="lazy" 
          />
          
          <h2 class="text-2xl font-semibold text-indigo-500">{post.title}</h2>
          <p class="mt-2 text-sm text-gray-500">
            {new Date(post.published_at).toLocaleDateString("en-US", {
              year: "numeric",
              month: "long",
              day: "numeric"
            })}
          </p>
          <p class="mt-4">{post.description}</p>

          <a 
            href={post.url} 
            target="_blank"
            rel="noopener noreferrer"
            class="mt-3 inline-block text-sm text-indigo-600 dark:text-indigo-400 underline"
          >
            Read more
          </a>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
